[
  {
    "identifier": "Ollama.Ollama",
    "name": "Ollama",
    "description": "Run large language models locally",
    "version": "0.1.48",
    "platform": "windows",
    "architecture": "x64",
    "install_steps": [
      {
        "type": "Download",
        "url": "https://github.com/ollama/ollama/releases/download/v0.1.48/OllamaSetup.exe",
        "target": "OllamaSetup.exe"
      },
      {
        "type": "Run",
        "command": "OllamaSetup.exe",
        "args": ["/VERYSILENT", "/SUPPRESSMSGBOXES", "/NORESTART", "/SP-"]
      },
      {
        "type": "SetEnv",
        "name": "PATH",
        "value": "${PATH};%USERPROFILE%\\AppData\\Local\\Programs\\Ollama"
      },
      {
        "type": "SetRegistry",
        "key": "HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{44E83376-CE68-45EB-8FC1-393500EB558C}_is1",
        "value": "Ollama"
      }
    ],
    "uninstall_steps": [
      {
        "type": "Run",
        "command": "%USERPROFILE%\\AppData\\Local\\Programs\\Ollama\\unins000.exe",
        "args": ["/VERYSILENT", "/SUPPRESSMSGBOXES", "/NORESTART"]
      },
      {
        "type": "UnsetEnv",
        "name": "PATH"
      },
      {
        "type": "RemoveRegistry",
        "key": "HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{44E83376-CE68-45EB-8FC1-393500EB558C}_is1"
      }
    ]
  },
    {
      "identifier": "com.example.notepad++",
      "name": "Notepad++",
      "description": "Notepad++ is a free source code editor and Notepad replacement that supports several languages.",
      "version": "8.4.2",
      "platform": "windows",
      "architecture": "x64",
      "install_steps": [
        {
          "type": "Download",
          "url": "https://github.com/notepad-plus-plus/notepad-plus-plus/releases/download/v8.4.2/npp.8.4.2.Installer.x64.exe",
          "target": "npp_installer.exe"
        },
        {
          "type": "Run",
          "command": "npp_installer.exe",
          "args": ["/S"]
        },
        {
          "type": "SetEnv",
          "name": "NOTEPAD_PLUS_PLUS_HOME",
          "value": "C:\\Program Files\\Notepad++"
        },
        {
          "type": "SetRegistry",
          "key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Notepad++\\Version",
          "value": "8.4.2"
        }
      ],
      "uninstall_steps": [
        {
          "type": "Run",
          "command": "C:\\Program Files\\Notepad++\\uninstall.exe",
          "args": ["/S"]
        },
        {
          "type": "UnsetEnv",
          "name": "NOTEPAD_PLUS_PLUS_HOME"
        },
        {
          "type": "RemoveRegistry",
          "key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Notepad++"
        }
      ]
    },
    {
      "identifier": "org.mozilla.firefox",
      "name": "Firefox",
      "description": "Mozilla Firefox is a free and open-source web browser developed by the Mozilla Foundation.",
      "version": "91.0.2",
      "platform": "linux",
      "architecture": "x86_64",
      "install_steps": [
        {
          "type": "Download",
          "url": "https://download-installer.cdn.mozilla.net/pub/firefox/releases/91.0.2/linux-x86_64/en-US/firefox-91.0.2.tar.bz2",
          "target": "firefox.tar.bz2"
        },
        {
          "type": "Extract",
          "source": "firefox.tar.bz2",
          "target": "/opt"
        },
        {
          "type": "CreateDir",
          "target": "/usr/local/bin"
        },
        {
          "type": "Run",
          "command": "ln",
          "args": ["-s", "/opt/firefox/firefox", "/usr/local/bin/firefox"]
        },
        {
          "type": "Variable",
          "name": "desktop_file",
          "value": "[Desktop Entry]\nName=Firefox\nComment=Web Browser\nExec=/opt/firefox/firefox %u\nTerminal=false\nType=Application\nIcon=/opt/firefox/browser/chrome/icons/default/default128.png\nCategories=Network;WebBrowser;\nMimeType=text/html;text/xml;application/xhtml+xml;application/xml;application/vnd.mozilla.xul+xml;application/rss+xml;application/rdf+xml;image/gif;image/jpeg;image/png;x-scheme-handler/http;x-scheme-handler/https;\nStartupNotify=true"
        },
        {
          "type": "CreateDir",
          "target": "/usr/local/share/applications"
        },
        {
          "type": "Run",
          "command": "bash",
          "args": ["-c", "echo \"${desktop_file}\" > /usr/local/share/applications/firefox.desktop"]
        }
      ],
      "uninstall_steps": [
        {
          "type": "Delete",
          "target": "/opt/firefox"
        },
        {
          "type": "Delete",
          "target": "/usr/local/bin/firefox"
        },
        {
          "type": "Delete",
          "target": "/usr/local/share/applications/firefox.desktop"
        }
      ]
    },
    {
      "identifier": "com.example.custom-app",
      "name": "Custom App",
      "description": "A custom application demonstrating various installation steps.",
      "version": "1.0.0",
      "platform": "any",
      "architecture": "any",
      "install_steps": [
        {
          "type": "Comment",
          "text": "This is a demo of various installation steps"
        },
        {
          "type": "CreateDir",
          "target": "${HOME}/custom-app"
        },
        {
          "type": "Download",
          "url": "https://example.com/custom-app.zip",
          "target": "custom-app.zip"
        },
        {
          "type": "Extract",
          "source": "custom-app.zip",
          "target": "${HOME}/custom-app"
        },
        {
          "type": "If",
          "condition": "${OS} == 'windows'",
          "steps": [
            {
              "type": "Run",
              "command": "powershell",
              "args": ["-Command", "New-Item -ItemType SymbolicLink -Path \"${HOME}\\Desktop\\Custom App\" -Target \"${HOME}\\custom-app\\custom-app.exe\""]
            }
          ],
          "else_steps": [
            {
              "type": "Run",
              "command": "ln",
              "args": ["-s", "${HOME}/custom-app/custom-app", "${HOME}/Desktop/Custom App"]
            }
          ]
        },
        {
          "type": "For",
          "variable": "config_file",
          "values": ["config.json", "settings.ini", "user-prefs.yaml"],
          "steps": [
            {
              "type": "Copy",
              "source": "${config_file}",
              "target": "${HOME}/custom-app/${config_file}"
            }
          ]
        },
        {
          "type": "SetEnv",
          "name": "CUSTOM_APP_HOME",
          "value": "${HOME}/custom-app"
        },
        {
          "type": "Include",
          "file": "post-install-steps.json"
        },
        {
          "type": "Sleep",
          "duration": 5
        },
        {
          "type": "Run",
          "command": "${HOME}/custom-app/custom-app",
          "args": ["--post-install-check"]
        }
      ],
      "uninstall_steps": [
        {
          "type": "Comment",
          "text": "Uninstall steps for Custom App"
        },
        {
          "type": "Run",
          "command": "${HOME}/custom-app/custom-app",
          "args": ["--uninstall"]
        },
        {
          "type": "RemoveDir",
          "target": "${HOME}/custom-app"
        },
        {
          "type": "Delete",
          "target": "${HOME}/Desktop/Custom App"
        },
        {
          "type": "UnsetEnv",
          "name": "CUSTOM_APP_HOME"
        }
      ]
    }
  ]